
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as L}from"./index-b1f68172.js";import{A as N}from"./sales-0401c21e.js";import{O as W,l as M}from"./index-ebb5170c.js";import{d as X,r as b,R as G,x as J,o as p,c as S,e as t,f as a,N as R,S as D,b as _,k as f,w as K,I as C,a as Q,t as T,h as n,X as Y,q as U}from"./index-18448298.js";const Z=["src"],E=X({__name:"order",setup(ee){const k=b(),z=b(0),w=b(!1),o=G({orderStatus:0,withdrawalChannels:null,page:1,size:10}),x=b([]);async function u(){try{w.value=!0;const s=await N.querySalesOrder(o);w.value=!1;const{rows:l,count:c}=s.data;z.value=c,x.value=l}catch{w.value=!1}}function B(s){s==null||s.resetFields(),u()}async function I(s,l){const{id:c}=s,g={id:c,status:l};await N.salesAuditOrder(g),u()}return J(()=>{u()}),(s,l)=>{const c=n("el-option"),g=n("el-select"),v=n("el-form-item"),h=n("el-button"),q=n("el-form"),y=L,P=n("el-alert"),i=n("el-table-column"),O=n("el-tag"),V=n("el-popconfirm"),$=n("el-table"),j=n("el-pagination"),F=n("el-row"),H=Y("loading");return p(),S("div",null,[t(y,null,{default:a(()=>[t(q,{ref_key:"formRef",ref:k,inline:!0,model:o},{default:a(()=>[t(v,{label:"工单状态",prop:"orderStatus"},{default:a(()=>[t(g,{modelValue:o.orderStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>o.orderStatus=e),placeholder:"请选择工单状态",clearable:""},{default:a(()=>[(p(!0),S(R,null,D(_(W),e=>(p(),C(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"提现渠道",prop:"withdrawalChannels"},{default:a(()=>[t(g,{modelValue:o.withdrawalChannels,"onUpdate:modelValue":l[1]||(l[1]=e=>o.withdrawalChannels=e),placeholder:"请选择提现渠道",clearable:""},{default:a(()=>[(p(!0),S(R,null,D(_(M),e=>(p(),C(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:a(()=>[t(h,{type:"primary",onClick:u},{default:a(()=>[f(" 查询 ")]),_:1}),t(h,{onClick:l[2]||(l[2]=e=>B(_(k)))},{default:a(()=>[f(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(y,null,{default:a(()=>[t(P,{"show-icon":"",title:"提现审核说明",description:"所有工单只可审核一次、请准确操作、打款请人工打款、确定打款后点击审核通过即可！",type:"success"})]),_:1}),t(y,{style:{width:"100%"}},{default:a(()=>[K((p(),C($,{border:"",data:_(x),style:{width:"100%"},size:"large"},{default:a(()=>[t(i,{prop:"userInfo.avatar",label:"头像",width:"120"},{default:a(e=>{var r,d;return[Q("img",{src:(d=(r=e.row)==null?void 0:r.userInfo)==null?void 0:d.avatar,style:{height:"50px"}},null,8,Z)]}),_:1}),t(i,{prop:"withdrawalChannels",align:"center",label:"提现渠道"},{default:a(e=>{var r;return[t(O,{type:((r=e.row)==null?void 0:r.withdrawalChannels)===1?"":"success"},{default:a(()=>{var d,m;return[f(T(((d=e.row)==null?void 0:d.withdrawalChannels)===1?"支付宝":((m=e.row)==null?void 0:m.withdrawalChannels)===2?"微信":"银行卡"),1)]}),_:2},1032,["type"])]}),_:1}),t(i,{prop:"userInfo.email",label:"邮箱",width:"200"}),t(i,{prop:"withdrawalAmount",align:"center",label:"提现金额"}),t(i,{prop:"contactInformation",align:"center",label:"提现备注",width:"340"}),t(i,{prop:"remark",align:"center",label:"提现留言",width:"340"}),t(i,{prop:"orderStatus",align:"center",label:"工单状态",width:"140"},{default:a(e=>{var r,d;return[t(O,{type:((r=e.row)==null?void 0:r.orderStatus)===0?"":((d=e.row)==null?void 0:d.orderStatus)===1?"success":"danger"},{default:a(()=>{var m,A;return[f(T(((m=e.row)==null?void 0:m.orderStatus)===0?"待审核":((A=e.row)==null?void 0:A.orderStatus)===1?"已通过":"已拒绝"),1)]}),_:2},1032,["type"])]}),_:1}),t(i,{fixed:"right",label:"审核",width:"200",align:"center"},{default:a(e=>[t(V,{title:"确认通过审核吗、请您先手动打款后通过！",width:"260","icon-color":"red",onConfirm:r=>I(e.row,1)},{reference:a(()=>[t(h,{link:"",type:"primary",size:"small",disabled:e.row.orderStatus!==0},{default:a(()=>[f(" 通过审核 ")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"]),t(V,{title:"确认拒绝审核么、拒绝后此次提交将作废！",width:"260","icon-color":"red",onConfirm:r=>I(e.row,-1)},{reference:a(()=>[t(h,{link:"",type:"danger",size:"small",disabled:e.row.orderStatus!==0},{default:a(()=>[f(" 拒绝审核 ")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[H,_(w)]]),t(F,{class:"flex justify-end mt-5"},{default:a(()=>[t(j,{"current-page":o.page,"onUpdate:currentPage":l[3]||(l[3]=e=>o.page=e),"page-size":o.size,"onUpdate:pageSize":l[4]||(l[4]=e=>o.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:_(z),onSizeChange:u,onCurrentChange:u},null,8,["current-page","page-size","total"])]),_:1})]),_:1})])}}});typeof U=="function"&&U(E);export{E as default};
