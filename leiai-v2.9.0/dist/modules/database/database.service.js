'use strict';const _0x297ca9=_0x52d9;(function(_0x3ddb59,_0x391350){const _0x83105e=_0x52d9,_0x199171=_0x3ddb59();while(!![]){try{const _0x43d884=parseInt(_0x83105e(0x21b))/0x1*(parseInt(_0x83105e(0x1fe))/0x2)+-parseInt(_0x83105e(0x1f5))/0x3*(-parseInt(_0x83105e(0x20e))/0x4)+-parseInt(_0x83105e(0x226))/0x5+parseInt(_0x83105e(0x247))/0x6*(-parseInt(_0x83105e(0x228))/0x7)+parseInt(_0x83105e(0x246))/0x8+-parseInt(_0x83105e(0x23e))/0x9*(parseInt(_0x83105e(0x230))/0xa)+parseInt(_0x83105e(0x1fd))/0xb;if(_0x43d884===_0x391350)break;else _0x199171['push'](_0x199171['shift']());}catch(_0x58b747){_0x199171['push'](_0x199171['shift']());}}}(_0x41e5,0x6eab8));var __decorate=this&&this[_0x297ca9(0x20f)]||function(_0x4ef56b,_0xb3f65f,_0x5e1702,_0x52eaa9){const _0x464d67=_0x297ca9;var _0x3d72f5=arguments[_0x464d67(0x254)],_0x3fc265=_0x3d72f5<0x3?_0xb3f65f:_0x52eaa9===null?_0x52eaa9=Object[_0x464d67(0x248)](_0xb3f65f,_0x5e1702):_0x52eaa9,_0x33125c;if(typeof Reflect===_0x464d67(0x250)&&typeof Reflect['decorate']===_0x464d67(0x220))_0x3fc265=Reflect[_0x464d67(0x214)](_0x4ef56b,_0xb3f65f,_0x5e1702,_0x52eaa9);else{for(var _0x5eb707=_0x4ef56b[_0x464d67(0x254)]-0x1;_0x5eb707>=0x0;_0x5eb707--)if(_0x33125c=_0x4ef56b[_0x5eb707])_0x3fc265=(_0x3d72f5<0x3?_0x33125c(_0x3fc265):_0x3d72f5>0x3?_0x33125c(_0xb3f65f,_0x5e1702,_0x3fc265):_0x33125c(_0xb3f65f,_0x5e1702))||_0x3fc265;}return _0x3d72f5>0x3&&_0x3fc265&&Object[_0x464d67(0x20b)](_0xb3f65f,_0x5e1702,_0x3fc265),_0x3fc265;},__metadata=this&&this[_0x297ca9(0x206)]||function(_0x568da7,_0x22e866){const _0x4cf4cf=_0x297ca9;if(typeof Reflect===_0x4cf4cf(0x250)&&typeof Reflect[_0x4cf4cf(0x224)]==='function')return Reflect[_0x4cf4cf(0x224)](_0x568da7,_0x22e866);};Object['defineProperty'](exports,_0x297ca9(0x255),{'value':!![]}),exports[_0x297ca9(0x243)]=void 0x0;const common_1=require(_0x297ca9(0x205)),typeorm_1=require(_0x297ca9(0x212)),bcrypt=require('bcryptjs');function _0x41e5(){const _0x59bbcd=['LeiAITeam团队账号激活成功','registerSendModel3Count','HttpException','\x27,\x200,\x201000,\x20100)','99sVMQSz','欢迎使用LEIAI\x20Team团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','INTERNAL_SERVER_ERROR','baiduToken','Logger','DatabaseService','createBaseSiteConfig','创建默认超级管理员失败！','4207600LTwOcK','3663642mfnZDj','getOwnPropertyDescriptor','创建默认网站配置失败！','qqNumber','query','insertId','inviteGiveSendModel4Count','checkSuperAdmin','LeiAITeam账号激活失败','object',',请妥善保管您的账号，我们将为您赠送50次对话额度和5次绘画额度、祝您使用愉快','registerVerifyExpir','Lei\x20Ai','length','__esModule','openaiBaseUrl','123456','初始化创建','registerFailEmailTeamName','LeiAITeam团队账号验证','firstRregisterSendModel3Count','inviteSendStatus','135483kkFlXW','super','invitedGuestSendModel4Count','map','checkSiteBaseConfig','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','19024441','registerSendDrawMjCount','2912514AAjYhK','1928cpZUGr','registerVerifyEmailDesc',']、初始密码为[','registerSendStatus','join','createDefaultUser','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','@nestjs/common','__metadata','configKey','inviteGiveSendDrawMjCount','default@leiai.com','\x27,\x20\x27','defineProperty','baiduSiteId','HttpStatus','40OcTIxj','__decorate','connection','baiduCode','typeorm','inviteGiveSendModel3Count','decorate','configVal','500','vxNumber','count','log','registerSuccessEmaileAppend','697SvgXgm','buyCramiAddress','LeiAITeam团队','registerSuccessEmailTeamName','encry','function','siteName','lei-super','onModuleInit','metadata','robotAvatar','3672450jjpMFC','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','7vRdJaF','userDefautlAvatar','Injectable','Connection','https://api.openai.com','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','registerVerifyEmailFrom','admin','105310cUiqLh','firstRegisterSendRank','registerSendModel4Count','19370531937','error:\x20','1800','public','registerFailEmailTitle','2799909005','registerSuccessEmailTitle'];_0x41e5=function(){return _0x59bbcd;};return _0x41e5();}function _0x52d9(_0x5842d1,_0x4d38ae){const _0x41e5e2=_0x41e5();return _0x52d9=function(_0x52d926,_0x3aa4ab){_0x52d926=_0x52d926-0x1ee;let _0x39d716=_0x41e5e2[_0x52d926];return _0x39d716;},_0x52d9(_0x5842d1,_0x4d38ae);}let DatabaseService=class DatabaseService{constructor(_0x5baf70){const _0x27c2a0=_0x297ca9;this[_0x27c2a0(0x210)]=_0x5baf70;}async[_0x297ca9(0x223)](){const _0x108b5c=_0x297ca9;await this['checkSuperAdmin'](),await this[_0x108b5c(0x1f9)]();}async[_0x297ca9(0x24e)](){const _0x313582=_0x297ca9,_0x45df06=await this[_0x313582(0x210)]['query'](_0x313582(0x204));if(!_0x45df06||_0x45df06[_0x313582(0x254)]===0x0){const _0x235b10=bcrypt['hashSync'](_0x313582(0x222),0xa),_0x59ccf9=bcrypt['hashSync'](_0x313582(0x1ef),0xa),_0x463dcf=_0x313582(0x209),_0x159513='defaultAdmin@leiai.com',_0x27f3b8={'username':_0x313582(0x1f6),'password':_0x235b10,'status':0x1,'email':_0x463dcf,'sex':0x1,'role':_0x313582(0x1f6)},_0x22d972={'username':_0x313582(0x22f),'password':_0x59ccf9,'status':0x1,'email':_0x159513,'sex':0x1,'role':_0x313582(0x22f)};await this[_0x313582(0x203)](_0x27f3b8),await this[_0x313582(0x203)](_0x22d972);}}async[_0x297ca9(0x203)](_0x27c87d){const _0x4f7fc8=_0x297ca9;try{const {username:_0x38c1a9,password:_0x248761,status:_0x3f7891,email:_0x533e71,role:_0x5572da}=_0x27c87d,_0x4e70e5=await this[_0x4f7fc8(0x210)][_0x4f7fc8(0x24b)]('INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27'+_0x38c1a9+'\x27,\x20\x27'+_0x248761+_0x4f7fc8(0x20a)+_0x3f7891+'\x27,\x20\x27'+_0x533e71+_0x4f7fc8(0x20a)+_0x5572da+'\x27)'),_0x49290d=_0x4e70e5[_0x4f7fc8(0x24c)],_0x52e59c=await this['connection'][_0x4f7fc8(0x24b)](_0x4f7fc8(0x1fa)+_0x49290d+_0x4f7fc8(0x23d));common_1[_0x4f7fc8(0x242)]['log'](_0x4f7fc8(0x1f0)+_0x5572da+'用户成功、用户名为['+_0x38c1a9+_0x4f7fc8(0x200)+(_0x38c1a9===_0x4f7fc8(0x1f6)?_0x4f7fc8(0x222):_0x4f7fc8(0x1ef))+']\x20==============>\x20请注意查阅',_0x4f7fc8(0x243));}catch(_0x2d6f51){console[_0x4f7fc8(0x219)](_0x4f7fc8(0x234),_0x2d6f51);throw new common_1['HttpException'](_0x4f7fc8(0x245),common_1[_0x4f7fc8(0x20d)][_0x4f7fc8(0x240)]);}}async[_0x297ca9(0x1f9)](){const _0x2eb242=_0x297ca9,_0xf031b0=[_0x2eb242(0x221),_0x2eb242(0x24a),'vxNumber',_0x2eb242(0x225),_0x2eb242(0x229)],_0x23d48a=await this['connection']['query'](_0x2eb242(0x227)+_0xf031b0[_0x2eb242(0x1f8)](_0x2d3816=>'\x27'+_0x2d3816+'\x27')['join'](',')+')\x0a'),_0xec9efa=parseInt(_0x23d48a[0x0][_0x2eb242(0x218)]);_0xec9efa===0x0&&await this[_0x2eb242(0x244)]();}async[_0x297ca9(0x244)](){const _0x515566=_0x297ca9;try{const _0x1b976c='\x0a\x20\x20<script>\x0a\x20\x20var\x20_hmt\x20=\x20_hmt\x20||\x20[];\x0a\x20\x20(function()\x20{\x0a\x20\x20\x20\x20var\x20hm\x20=\x20document.createElement(\x22script\x22);\x0a\x20\x20\x20\x20hm.src\x20=\x20\x22https://hm.baidu.com/hm.js?cb8c9a3bcadbc200e950b05f9c61a385\x22;\x0a\x20\x20\x20\x20var\x20s\x20=\x20document.getElementsByTagName(\x22script\x22)[0];\x0a\x20\x20\x20\x20s.parentNode.insertBefore(hm,\x20s);\x0a\x20\x20})();\x0a\x20\x20</script>\x0a',_0x2a9800='\x0a####\x20公告设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a\x20-\x20前往后台设置\x0a',_0x1aebec=[{'configKey':_0x515566(0x221),'configVal':_0x515566(0x253),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0x515566(0x238),'public':0x1,'encry':0x0},{'configKey':_0x515566(0x217),'configVal':_0x515566(0x233),'public':0x1,'encry':0x0},{'configKey':_0x515566(0x225),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x515566(0x229),'configVal':'https://hk-oss-sss1.oss-accelerate.aliyuncs.com/img/Cute_panda_avatar.png','public':0x0,'encry':0x0},{'configKey':_0x515566(0x211),'configVal':_0x1b976c,'public':0x1,'encry':0x0},{'configKey':_0x515566(0x20c),'configVal':_0x515566(0x1fb),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x241),'configVal':'121.a1600b9b60910feea2ef627ea9776a6f.YGP_CWCOA2lNcIGJ27BwXGxa6nZhBQyLUS4XVaD.TWt9TA','public':0x0,'encry':0x0},{'configKey':_0x515566(0x21c),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0x515566(0x1ee),'configVal':_0x515566(0x22c),'public':0x0,'encry':0x0},{'configKey':'noticeInfo','configVal':_0x2a9800,'public':0x1,'encry':0x0},{'configKey':'registerVerifyEmailTitle','configVal':_0x515566(0x1f2),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x1ff),'configVal':_0x515566(0x23f),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x22e),'configVal':_0x515566(0x21d),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x252),'configVal':_0x515566(0x235),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x239),'configVal':_0x515566(0x23a),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x21e),'configVal':_0x515566(0x21d),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x21a),'configVal':_0x515566(0x251),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x237),'configVal':_0x515566(0x24f),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x1f1),'configVal':_0x515566(0x21d),'public':0x0,'encry':0x0},{'configKey':_0x515566(0x201),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x515566(0x23b),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x515566(0x232),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x515566(0x1fc),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x515566(0x231),'configVal':_0x515566(0x216),'public':0x1,'encry':0x0},{'configKey':_0x515566(0x1f3),'configVal':'20','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel4Count','configVal':'2','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawMjCount','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x515566(0x1f4),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x515566(0x213),'configVal':'30','public':0x1,'encry':0x0},{'configKey':_0x515566(0x24d),'configVal':'3','public':0x1,'encry':0x0},{'configKey':_0x515566(0x208),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendModel3Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0x515566(0x1f7),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'invitedGuestSendDrawMjCount','configVal':'1','public':0x1,'encry':0x0}],_0x48c26d=await this[_0x515566(0x210)][_0x515566(0x24b)]('INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20'+_0x1aebec[_0x515566(0x1f8)](_0x112f29=>'(\x27'+_0x112f29[_0x515566(0x207)]+_0x515566(0x20a)+_0x112f29[_0x515566(0x215)]['replace'](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x112f29[_0x515566(0x236)]+_0x515566(0x20a)+_0x112f29[_0x515566(0x21f)]+'\x27)')[_0x515566(0x202)](',\x20'));common_1[_0x515566(0x242)]['log'](_0x515566(0x22d),'DatabaseService');}catch(_0x558fc5){console[_0x515566(0x219)](_0x515566(0x234),_0x558fc5);throw new common_1[(_0x515566(0x23c))](_0x515566(0x249),common_1[_0x515566(0x20d)][_0x515566(0x240)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x297ca9(0x22a)])(),__metadata('design:paramtypes',[typeorm_1[_0x297ca9(0x22b)]])],DatabaseService),exports['DatabaseService']=DatabaseService;