'use strict';const _0xe068a=_0x5ecb;(function(_0x4df98e,_0x2ce9e5){const _0x41d5ad=_0x5ecb,_0x441e08=_0x4df98e();while(!![]){try{const _0x5190c2=parseInt(_0x41d5ad(0x135))/0x1*(parseInt(_0x41d5ad(0x13b))/0x2)+parseInt(_0x41d5ad(0x140))/0x3*(-parseInt(_0x41d5ad(0x133))/0x4)+-parseInt(_0x41d5ad(0x15c))/0x5+parseInt(_0x41d5ad(0x138))/0x6*(parseInt(_0x41d5ad(0x15d))/0x7)+parseInt(_0x41d5ad(0x143))/0x8*(parseInt(_0x41d5ad(0x155))/0x9)+-parseInt(_0x41d5ad(0x132))/0xa*(-parseInt(_0x41d5ad(0x141))/0xb)+parseInt(_0x41d5ad(0x150))/0xc*(-parseInt(_0x41d5ad(0x157))/0xd);if(_0x5190c2===_0x2ce9e5)break;else _0x441e08['push'](_0x441e08['shift']());}catch(_0x3268e2){_0x441e08['push'](_0x441e08['shift']());}}}(_0x2c74,0x8603b));function _0x2c74(){const _0x52fbd5=['design:returntype','metadata','design:paramtypes','checkUserMemerExpire','Injectable','EVERY_5_MINUTES','__esModule','TaskService','184810ieObMo','4bYnNJo','InjectRepository','61391MiLQJD','handleCron','decorate','3879120yLgiem','EVERY_HOUR','object','34ByKpry','@nestjs/schedule','function','getOwnPropertyDescriptor','LessThanOrEqual','3084033BvBeez','572bbuDPz','Logger','39976jRIepK','Cron','UserBalanceEntity','typeorm','globalConfigService','then','会员已到期、清空所有余额并移除会员身份！','defineProperty','prototype','userBalanceEntity','length','CronExpression','__decorate','168jGuhlU','./../globalConfig/globalConfig.service','__metadata','forEach','debug','1611bpbtoc','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','942097nKuUhu','@nestjs/typeorm','design:type','getWechatAccessToken','@nestjs/common','4770710gTnywf','7sATjcJ'];_0x2c74=function(){return _0x52fbd5;};return _0x2c74();}var __decorate=this&&this[_0xe068a(0x14f)]||function(_0x46772e,_0x177ff5,_0x3f9578,_0x4c27b9){const _0x297435=_0xe068a;var _0x29a549=arguments[_0x297435(0x14d)],_0x1dbccb=_0x29a549<0x3?_0x177ff5:_0x4c27b9===null?_0x4c27b9=Object[_0x297435(0x13e)](_0x177ff5,_0x3f9578):_0x4c27b9,_0x5abc64;if(typeof Reflect===_0x297435(0x13a)&&typeof Reflect[_0x297435(0x137)]===_0x297435(0x13d))_0x1dbccb=Reflect[_0x297435(0x137)](_0x46772e,_0x177ff5,_0x3f9578,_0x4c27b9);else{for(var _0x4cb4c0=_0x46772e[_0x297435(0x14d)]-0x1;_0x4cb4c0>=0x0;_0x4cb4c0--)if(_0x5abc64=_0x46772e[_0x4cb4c0])_0x1dbccb=(_0x29a549<0x3?_0x5abc64(_0x1dbccb):_0x29a549>0x3?_0x5abc64(_0x177ff5,_0x3f9578,_0x1dbccb):_0x5abc64(_0x177ff5,_0x3f9578))||_0x1dbccb;}return _0x29a549>0x3&&_0x1dbccb&&Object[_0x297435(0x14a)](_0x177ff5,_0x3f9578,_0x1dbccb),_0x1dbccb;},__metadata=this&&this[_0xe068a(0x152)]||function(_0x437f5b,_0x2145b1){const _0x457707=_0xe068a;if(typeof Reflect===_0x457707(0x13a)&&typeof Reflect[_0x457707(0x12b)]==='function')return Reflect[_0x457707(0x12b)](_0x437f5b,_0x2145b1);},__param=this&&this['__param']||function(_0x542cb3,_0x5abc5a){return function(_0x79f76a,_0x22d300){_0x5abc5a(_0x79f76a,_0x22d300,_0x542cb3);};};function _0x5ecb(_0x46a7e3,_0x37a513){const _0x2c7407=_0x2c74();return _0x5ecb=function(_0x5ecb38,_0x58962a){_0x5ecb38=_0x5ecb38-0x12a;let _0x58c510=_0x2c7407[_0x5ecb38];return _0x58c510;},_0x5ecb(_0x46a7e3,_0x37a513);}Object['defineProperty'](exports,_0xe068a(0x130),{'value':!![]}),exports[_0xe068a(0x131)]=void 0x0;const globalConfig_service_1=require(_0xe068a(0x151)),common_1=require(_0xe068a(0x15b)),schedule_1=require(_0xe068a(0x13c)),userBalance_entity_1=require('../userBalance/userBalance.entity'),typeorm_1=require(_0xe068a(0x158)),typeorm_2=require(_0xe068a(0x146));let TaskService=class TaskService{constructor(_0x508452,_0x1b6905){const _0x1a604f=_0xe068a;this[_0x1a604f(0x14c)]=_0x508452,this[_0x1a604f(0x147)]=_0x1b6905;}[_0xe068a(0x136)](){const _0x175c05=_0xe068a;common_1[_0x175c05(0x142)][_0x175c05(0x154)](_0x175c05(0x156),_0x175c05(0x131)),this[_0x175c05(0x147)][_0x175c05(0x15a)]();}async[_0xe068a(0x12d)](){const _0x5e3a85=_0xe068a,_0x3343c6=await this['userBalanceEntity']['find']({'where':{'expirationTime':(0x0,typeorm_2[_0x5e3a85(0x13f)])(new Date())}});if(!_0x3343c6||!_0x3343c6['length'])return;_0x3343c6[_0x5e3a85(0x153)](_0x2ded09=>{const _0xe371b=_0x5e3a85;this[_0xe371b(0x14c)]['update']({'id':_0x2ded09['id']},{'expirationTime':null,'packageId':0x0,'memberModel3Count':0x0,'memberModel4Count':0x0,'memberDrawMjCount':0x0})[_0xe371b(0x148)](_0x2913c6=>{const _0x59dee4=_0xe371b;common_1[_0x59dee4(0x142)][_0x59dee4(0x154)](_0x2ded09['id']+_0x59dee4(0x149),_0x59dee4(0x131));});});}};__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0xe068a(0x14e)][_0xe068a(0x139)]),__metadata(_0xe068a(0x159),Function),__metadata(_0xe068a(0x12c),[]),__metadata(_0xe068a(0x12a),void 0x0)],TaskService['prototype'],'handleCron',null),__decorate([(0x0,schedule_1[_0xe068a(0x144)])(schedule_1[_0xe068a(0x14e)][_0xe068a(0x12f)]),__metadata(_0xe068a(0x159),Function),__metadata('design:paramtypes',[]),__metadata(_0xe068a(0x12a),Promise)],TaskService[_0xe068a(0x14b)],_0xe068a(0x12d),null),TaskService=__decorate([(0x0,common_1[_0xe068a(0x12e)])(),__param(0x0,(0x0,typeorm_1[_0xe068a(0x134)])(userBalance_entity_1[_0xe068a(0x145)])),__metadata(_0xe068a(0x12c),[typeorm_2['Repository'],globalConfig_service_1['GlobalConfigService']])],TaskService),exports[_0xe068a(0x131)]=TaskService;